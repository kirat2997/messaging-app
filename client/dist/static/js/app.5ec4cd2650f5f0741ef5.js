webpackJsonp([2],{"/X1V":function(e,t){},0:function(e,t){},"0g/W":function(e,t){},Ffsy:function(e,t){},"Lm5/":function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("7+uW"),n=a("3EgV"),s=a.n(n),i={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("router-view")],1)},staticRenderFns:[]};var o=a("VU/8")({name:"App"},i,!1,function(e){a("VBIP")},null,null).exports,c=a("/ocq"),u=a("Xxa5"),l=a.n(u),d=a("exGp"),p=a.n(d),v=a("mtWM"),m=a.n(v),f=a("ytdl"),h=a.n(f),k=a("NYxO"),b=a("424j");r.default.use(k.a);var x,w,_,g,y,S,E,R=new k.a.Store({state:{user:null,token:null,isAuthenticated:!1,workspace:null,workspaceStatus:!1},mutations:{USER_DATA:function(e,t){e.user=t},SET_WORKSPACE_ACTIVE:function(e,t){e.workspace=t.id,e.workspaceStatus=t.status},CHANGE_AUTH_STATE:function(e,t){e.isAuthenticated=t},SET_TOKEN:function(e,t){e.token=t},RESET_STATE:function(e){e.token=null,e.user=null,e.isAuthenticated=!1,e.workspace=null,e.workspaceStatus=!1},RESET_WORKSPACE:function(e){e.workspace=null,e.workspaceStatus=!1}},plugins:[Object(b.a)()]}),A=(x=p()(l.a.mark(function e(t){var a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.request({url:"/api/accounts/"+t.accountId,headers:{Authorization:"Bearer "+R.state.token},method:"get"});case 3:a=e.sent,R.commit("USER_DATA",a.data),e.next=11;break;case 7:if(e.prev=7,e.t0=e.catch(0),401!==e.t0.response.status){e.next=11;break}return e.abrupt("return",!1);case 11:return e.abrupt("return",!0);case 12:case"end":return e.stop()}},e,this,[[0,7]])})),function(e){return x.apply(this,arguments)}),U=(w=p()(l.a.mark(function e(t,a,r){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.request({url:"/api/signup",method:"post",data:{name:t,email:a,password:r}});case 3:if(200!==e.sent.status){e.next=6;break}return e.abrupt("return","success");case 6:e.next=15;break;case 8:if(e.prev=8,e.t0=e.catch(0),404!==e.t0.response.status){e.next=14;break}return e.abrupt("return","exist");case 14:return e.abrupt("return",!1);case 15:case"end":return e.stop()}},e,this,[[0,8]])})),function(e,t,a){return w.apply(this,arguments)}),C=(_=p()(l.a.mark(function e(t,a){var r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.request({url:"/api/login",method:"post",data:{email:t,password:a}});case 3:if(200!==(r=e.sent).status){e.next=7;break}return e.next=7,I(r.data);case 7:e.next=16;break;case 9:if(e.prev=9,e.t0=e.catch(0),400!==e.t0.response.status){e.next=15;break}return e.abrupt("return","no account");case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}},e,this,[[0,9]])})),function(e,t){return _.apply(this,arguments)}),P=(g=p()(l.a.mark(function e(t,a,r){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:R.state.isAuthenticated?R.state.workspaceStatus?t.params.channel?r():r("/workspace/general"):r("/home"):r("/");case 1:case"end":return e.stop()}},e,this)})),function(e,t,a){return g.apply(this,arguments)}),T=(y=p()(l.a.mark(function e(t,a,r){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:R.state.isAuthenticated?R.state.workspaceStatus?r("/workspace"):r("/home"):r();case 1:case"end":return e.stop()}},e,this)})),function(e,t,a){return y.apply(this,arguments)}),$=(S=p()(l.a.mark(function e(t,a,r){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!R.state.isAuthenticated){e.next=10;break}if(!R.state.workspaceStatus){e.next=5;break}r("/workspace"),e.next=8;break;case 5:return e.next=7,q();case 7:r();case 8:e.next=11;break;case 10:r("/");case 11:case"end":return e.stop()}},e,this)})),function(e,t,a){return S.apply(this,arguments)}),I=(E=p()(l.a.mark(function e(t){var a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=void 0,e.prev=1,M(a=h()(t))){e.next=13;break}return R.commit("SET_TOKEN",t),e.next=7,A(a);case 7:e.sent||ve.push("/"),R.commit("CHANGE_AUTH_STATE",!0),ve.push("/home"),e.next=15;break;case 13:R.commit("RESET_STATE"),ve.push("/");case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(1),R.commit("RESET_STATE"),ve.push("/");case 21:case"end":return e.stop()}},e,this,[[1,17]])})),function(e){return E.apply(this,arguments)});function M(e){return function(e){if(!e.exp)return null;var t=new Date(0);return t.setUTCSeconds(e.exp),t}(e)<new Date}var N,q=(N=p()(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.request({url:"/api/accounts/"+R.state.user._id,headers:{Authorization:"Bearer "+R.state.token},method:"get"});case 3:t=e.sent,R.commit("USER_DATA",t.data),e.next=11;break;case 7:if(e.prev=7,e.t0=e.catch(0),401!==e.t0.response.status){e.next=11;break}return e.abrupt("return",!1);case 11:return e.abrupt("return",!0);case 12:case"end":return e.stop()}},e,this,[[0,7]])})),function(){return N.apply(this,arguments)}),W={name:"Login",data:function(){return{drawer:null,emailRules:[function(e){return!!e||"E-mail is required"},function(e){return/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(e)||"E-mail must be valid"}],passwordRules:[function(e){return!!e||"Password is required"}],email:null,password:null,valid:!0,snackbar:!1,text:null}},methods:{submit:function(){var e=this;return p()(l.a.mark(function t(){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.$refs.form.validate()){t.next=5;break}return t.next=3,C(e.email,e.password);case 3:"no account"===t.sent&&(e.snackbar=!0,e.text="Email or password is incorrect.");case 5:case"end":return t.stop()}},t,e)}))()}}},L={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-snackbar",{attrs:{timeout:2e3,top:!0},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(e._s(e.text))]),e._v(" "),a("v-card",{staticClass:"elevation-12"},[a("v-toolbar",{attrs:{dark:"",color:"teal darken-2"}},[a("v-toolbar-title",[e._v("Login")]),e._v(" "),a("v-spacer")],1),e._v(" "),a("v-card-text",[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-text-field",{attrs:{"prepend-icon":"person",rules:e.emailRules,name:"login",label:"Email",type:"email",required:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),e._v(" "),a("v-text-field",{attrs:{id:"password","prepend-icon":"lock",rules:e.passwordRules,name:"password",label:"Password",type:"password",required:""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:"teal darken-2",disabled:!e.valid},on:{click:e.submit}},[e._v("Login")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var j={name:"Signup",data:function(){var e=this;return{email:null,password:null,cnfPass:null,name:null,valid:!0,snackbar:!1,text:null,nameRules:[function(e){return!!e||"Name is required"},function(e){return e&&e.length<=20||"Name must be less than 10 characters"}],emailRules:[function(e){return!!e||"E-mail is required"},function(e){return/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(e)||"E-mail must be valid"}],passwordRules:[function(e){return!!e||"Password is required"},function(e){return e&&e.length>=6||"password must must contain minimum 6 characters"}],confpasswordRules:[function(e){return!!e||"This field is required"},function(t){return t&&t===e.password||"Password do not match"}]}},methods:{submit:function(){var e=this;return p()(l.a.mark(function t(){var a;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.$refs.form.validate()){t.next=5;break}return t.next=3,U(e.name,e.email,e.password);case 3:"success"===(a=t.sent)?(e.snackbar=!0,e.text="Successfully registered! Login to continue"):"exist"===a?(e.snackbar=!0,e.text="This email is already registered"):(e.snackbar=!0,e.text="Some error occured! Please try again");case 5:case"end":return t.stop()}},t,e)}))()}}},z={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-snackbar",{attrs:{timeout:2e3,top:!0},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(e._s(e.text))]),e._v(" "),a("v-card",{staticClass:"elevation-12"},[a("v-toolbar",{attrs:{dark:"",color:"teal darken-2"}},[a("v-toolbar-title",[e._v("Register")]),e._v(" "),a("v-spacer")],1),e._v(" "),a("v-card-text",[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-text-field",{attrs:{rules:e.nameRules,"prepend-icon":"perm_identity",name:"name",label:"Name",type:"text",required:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),e._v(" "),a("v-text-field",{attrs:{rules:e.emailRules,"prepend-icon":"person",name:"login",label:"Email",type:"email",required:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),e._v(" "),a("v-text-field",{attrs:{rules:e.passwordRules,id:"password","prepend-icon":"lock",name:"password",label:"Password",type:"password",required:""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e._v(" "),a("v-text-field",{attrs:{rules:e.confpasswordRules,id:"cnf-password","prepend-icon":"lock",name:"cnf-password",label:"Re-Enter Password",type:"password",required:""},model:{value:e.cnfPass,callback:function(t){e.cnfPass=t},expression:"cnfPass"}}),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:"teal darken-2",disabled:!e.valid},on:{click:e.submit}},[e._v("Register")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var F={name:"Index",data:function(){return{login:!0}},components:{Login:a("VU/8")(W,L,!1,function(e){a("0g/W")},"data-v-1f978ac6",null).exports,Signup:a("VU/8")(j,z,!1,function(e){a("eXGo")},"data-v-1b611f6f",null).exports},computed:{binding:function(){var e={column:!0};return this.$vuetify.breakpoint.mdAndUp&&(e.column=!1),e}}},O={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",{attrs:{id:"inspire"}},[a("v-content",[a("v-container",{attrs:{fluid:"","fill-height":""}},[a("v-layout",e._b({attrs:{"align-center":"","justify-center":""}},"v-layout",e.binding,!1),[a("v-flex",{attrs:{xs12:"",sm8:"",md8:""}},[a("h2",{on:{click:function(t){e.login=!0}}},[e._v("Login")]),e._v(" "),a("h2",{on:{click:function(t){e.login=!1}}},[e._v("Register")])]),e._v(" "),a("v-flex",{attrs:{xs12:"",sm8:"",md4:""}},[e.login?a("Login"):a("Signup")],1)],1)],1)],1)],1)},staticRenderFns:[]};var V=a("VU/8")(F,O,!1,function(e){a("/X1V")},"data-v-10f5053f",null).exports,D=function(){var e=p()(l.a.mark(function e(t,a,r){var n,s,i;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=R.state.user._id,s=R.state.token,e.next=5,m.a.request({url:"/api/createWorkspace/"+n,method:"post",headers:{Authorization:"Bearer "+s},data:{name:t,displayName:a,password:r}});case 5:if(200!==(i=e.sent).status){e.next=9;break}return R.commit("USER_DATA",i.data),e.abrupt("return","success");case 9:e.next=18;break;case 11:if(e.prev=11,e.t0=e.catch(0),420!==e.t0.response.status){e.next=17;break}return e.abrupt("return","exist");case 17:return e.abrupt("return",!1);case 18:case"end":return e.stop()}},e,this,[[0,11]])}));return function(t,a,r){return e.apply(this,arguments)}}(),H=function(){var e=p()(l.a.mark(function e(t,a){var r,n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=R.state.user._id,n=R.state.token,e.next=5,m.a.request({url:"/api/workspaceLogin/"+r,method:"post",headers:{Authorization:"Bearer "+n},data:{id:t,password:a}});case 5:200===e.sent.status&&(R.commit("SET_WORKSPACE_ACTIVE",{id:t,status:!0}),ve.push("/workspace")),e.next=16;break;case 9:if(e.prev=9,e.t0=e.catch(0),404!==e.t0.response.status){e.next=15;break}return e.abrupt("return","some error");case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}},e,this,[[0,9]])}));return function(t,a){return e.apply(this,arguments)}}(),B=function(){var e=p()(l.a.mark(function e(t){var a,r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=R.state.token,e.next=4,m.a.request({url:"/api/fetchWorkspace/"+t,method:"get",headers:{Authorization:"Bearer "+a}});case 4:if(200!==(r=e.sent).status){e.next=7;break}return e.abrupt("return",r.data);case 7:e.next=12;break;case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",!1);case 12:case"end":return e.stop()}},e,this,[[0,9]])}));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=p()(l.a.mark(function e(t){var a,r,n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=R.state.user._id,r=R.state.token,e.next=5,m.a.request({url:"/api/sendInvite/"+a,method:"post",data:t,headers:{Authorization:"Bearer "+r}});case 5:if(200!==(n=e.sent).status){e.next=8;break}return e.abrupt("return",n.data);case 8:e.next=19;break;case 10:if(e.prev=10,e.t0=e.catch(0),404!==e.t0.response.status){e.next=16;break}return e.abrupt("return","not found");case 16:if(420!==e.t0.response.status){e.next=18;break}return e.abrupt("return","sent");case 18:return e.abrupt("return",!1);case 19:case"end":return e.stop()}},e,this,[[0,10]])}));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=p()(l.a.mark(function e(t){var a,r,n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=R.state.user._id,r=R.state.token,e.next=5,m.a.request({url:"/api/acceptInvite/"+a,method:"post",data:t,headers:{Authorization:"Bearer "+r}});case 5:if(200!==(n=e.sent).status){e.next=9;break}return R.commit("USER_DATA",n.data),e.abrupt("return","success");case 9:e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",!1);case 14:case"end":return e.stop()}},e,this,[[0,11]])}));return function(t){return e.apply(this,arguments)}}(),G={name:"CreateWorkSpace",data:function(){return{dialog:!1,snackbar:!1,text:null,valid:!0,wsname:null,wsnameRules:[function(e){return!!e||"Name is required"}],userwsname:null,userwspassword:null,userwspasswordRules:[function(e){return!!e||"Name is required"},function(e){return e&&e.length>=6||"Password must contain minimum 6 characters"}]}},methods:{submit:function(){var e=this;return p()(l.a.mark(function t(){var a;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.$refs.form.validate()){t.next=6;break}return e.userwsname||(e.userwsname=e.$store.state.user.name),t.next=4,D(e.wsname,e.userwsname,e.userwspassword);case 4:"success"===(a=t.sent)?(e.$emit("response","Workspace Successfully Created"),e.dialog=!1):"exist"===a?(e.snackbar=!0,e.text="WorkSpace already exist."):(e.snackbar=!0,e.text="Some error occured! Please try again");case 6:case"end":return t.stop()}},t,e)}))()}}},X={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-snackbar",{attrs:{top:!0,timeout:1e3},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v("\n    "+e._s(e.text)+"\n  ")]),e._v(" "),a("v-dialog",{attrs:{fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-btn",{attrs:{slot:"activator",color:"teal darken-2",dark:""},slot:"activator"},[e._v("Create Workspace")]),e._v(" "),a("v-card",[a("v-toolbar",{attrs:{dark:"",color:"teal darken-2"}},[a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.dialog=!1}}},[a("v-icon",[e._v("close")])],1),e._v(" "),a("v-toolbar-title",[e._v("CREATE NEW WORKSPACE")]),e._v(" "),a("v-spacer"),e._v(" "),a("v-toolbar-items",[a("v-btn",{attrs:{dark:"",flat:"",disabled:!e.valid},on:{click:e.submit}},[e._v("CREATE")])],1)],1),e._v(" "),a("v-container",{attrs:{"justify-center":"","align-center":""}},[a("v-layout",[a("v-flex",{attrs:{xs12:"",md8:"","offset-md2":""}},[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-subheader",[e._v("Workspace Details")]),e._v(" "),a("v-text-field",{attrs:{rules:e.wsnameRules,name:"name",label:"Workspace Name",type:"text",required:""},model:{value:e.wsname,callback:function(t){e.wsname=t},expression:"wsname"}}),e._v(" "),a("br"),e._v(" "),a("v-subheader",[e._v("Workspace Creds")]),e._v(" "),a("v-text-field",{attrs:{name:"name",label:"Display Name For Workspace",type:"text",hint:"Not Required. Your default name will be used if empty.","persistent-hint":!0},model:{value:e.userwsname,callback:function(t){e.userwsname=t},expression:"userwsname"}}),e._v(" "),a("br"),e._v(" "),a("v-text-field",{attrs:{rules:e.userwspasswordRules,id:"password",name:"password",label:"Workspace Password",type:"password",required:""},model:{value:e.userwspassword,callback:function(t){e.userwspassword=t},expression:"userwspassword"}}),e._v(" "),a("v-card-actions",[a("v-spacer")],1)],1)],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var J={props:["item"],name:"EnterWorkSpace",data:function(){return{password:null,progress:!1,snackbar:!1,text:null}},methods:{enter:function(){var e=this;return p()(l.a.mark(function t(){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.password){t.next=7;break}return e.progress=!0,t.next=4,H(e.item.id,e.password);case 4:"some error"===t.sent?(e.snackbar=!0,e.text="Some error occured! Please try again."):(e.snackbar=!0,e.text="Incorrect Password"),e.progress=!1;case 7:case"end":return t.stop()}},t,e)}))()}},computed:{binding:function(){var e={column:!0};return this.$vuetify.breakpoint.mdAndUp&&(e.column=!1),e}}},Q={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-snackbar",{attrs:{top:!0,timeout:1e3},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(e._s(e.text))]),e._v(" "),e.progress?a("div",{staticStyle:{"z-index":"1",background:"rgba(0,0,0,0.3)",position:"fixed",top:"0","padding-top":"50vh",bottom:"0",left:"0",right:"0"}},[a("v-progress-circular",{attrs:{size:50,indeterminate:"",color:"teal darken-2"}})],1):e._e(),e._v(" "),a("v-expansion-panel",[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[e._v(e._s(e.item.workspaceName))]),e._v(" "),a("v-card",[a("v-container",[a("v-layout",e._b({},"v-layout",e.binding,!1),[a("v-flex",{attrs:{xs12:"",md7:""}},[a("v-text-field",{attrs:{"prepend-icon":"lock",name:"login",label:"Enter Password",type:"password",required:""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",md4:"","offset-md1":""}},[a("v-btn",{staticStyle:{width:"100%"},on:{click:e.enter}},[e._v("Enter")])],1)],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var Z={props:["data"],name:"Home",data:function(){return{login:!0,workspace:[],invitation:[],snackbar:!1,text:null,dialog:!1,name:null,password:null}},components:{CreateWorkSpace:a("VU/8")(G,X,!1,function(e){a("Lm5/")},"data-v-622af8a8",null).exports,EnterWorkSpace:a("VU/8")(J,Q,!1,function(e){a("xSlx")},"data-v-4a1a4aa1",null).exports},sockets:{ping:function(e){var t=this;return p()(l.a.mark(function a(){var r;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(e!==t.$store.state.user.email){a.next=5;break}return a.next=3,q();case 3:r=t.$store.state.user,t.invitation=r.invitations;case 5:case"end":return a.stop()}},a,t)}))()}},methods:{updateList:function(){var e=this.$store.state.user;this.workspace=e.workspace,this.invitation=e.invitations},reset:function(){this.$store.commit("RESET_STATE"),this.$router.push("/")},showResponse:function(e){this.snackbar=!0,this.text=e,this.workspace=this.$store.state.user.workspace},accept:function(e,t){var a=this;return p()(l.a.mark(function r(){return l.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!a.password){r.next=8;break}return a.name||(a.name=a.$store.state.user.name),r.next=4,K({wsid:e,name:a.name,password:a.password});case 4:r.sent&&(a.snackbar=!0,a.text="Accepted",a.$socket.emit("newUser",t)),a.dialog=!1,a.updateList();case 8:case"end":return r.stop()}},r,a)}))()}},beforeMount:function(){var e=this.$store.state.user;this.workspace=e.workspace,this.invitation=e.invitations,this.$socket.emit("loggedin",e.email)},computed:{binding:function(){var e={column:!0};return this.$vuetify.breakpoint.mdAndUp&&(e.column=!1),e}}},ee={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",{attrs:{id:"inspire"}},[a("v-snackbar",{attrs:{top:!0,timeout:1e3},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v("\n    "+e._s(e.text)+"\n  ")]),e._v(" "),a("v-toolbar",{staticClass:"white--text",attrs:{color:"teal darken-2"}},[a("v-toolbar-title",{staticClass:"white--text"},[e._v("Messaging App")]),e._v(" "),a("v-spacer"),e._v(" "),a("v-toolbar-items",[a("v-btn",{staticClass:"white--text",attrs:{flat:""},on:{click:e.reset}},[e._v("Logout")])],1)],1),e._v(" "),a("v-container",[a("v-layout",e._b({},"v-layout",e.binding,!1),[a("v-flex",{staticClass:"text-lg-left text-md-center",attrs:{xs12:"",md4:""}},[a("v-subheader",[e._v("Invitations")]),e._v(" "),a("v-layout",[0===e.invitation.length?a("v-flex",[e._v("\n            You have no pending invitations\n          ")]):a("v-flex",{attrs:{xs10:"","offset-xs1":""}},[a("v-list",{attrs:{"three-line":"",flat:""}},[e._l(e.invitation,function(t,r){return[a("v-list-tile",{key:r,attrs:{avatar:""}},[a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:e._s(t.wsname)}}),e._v(" "),a("v-list-tile-sub-title",[e._v("From: "+e._s(t.from))]),e._v(" "),a("v-dialog",{attrs:{width:"500"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-btn",{staticClass:"white--text",attrs:{slot:"activator",color:"teal darken-2"},slot:"activator"},[e._v("Accept")]),e._v(" "),a("v-card",[a("v-card-text",[a("v-text-field",{attrs:{type:"text",label:"Enter display name",hint:"Not Required","persistent-hint":!0},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),e._v(" "),a("v-text-field",{attrs:{type:"password",label:"Enter workspace password",required:""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),e._v(" "),a("v-divider"),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"teal darken-2",flat:""},on:{click:function(a){e.accept(t.wsid,t.wsname)}}},[e._v("\n                            Accept\n                          ")])],1)],1)],1)],1)],1),e._v(" "),r+1<e.invitation.length?a("v-divider",{key:r+10}):e._e()]})],2)],1)],1)],1),e._v(" "),a("v-flex",{attrs:{xs12:"",md8:""}},[a("v-subheader",[e._v("Your Workspaces")]),e._v(" "),a("v-layout",[0===e.workspace.length?a("v-flex",[e._v("\n            You have no workspace yet. Create One\n          ")]):a("v-flex",{attrs:{xs8:"","offset-xs2":""}},e._l(e.workspace,function(e){return a("EnterWorkSpace",{key:e._id,attrs:{item:e}})}))],1),e._v(" "),a("v-layout",[a("v-flex",{attrs:{xs12:"",md4:"","offset-md4":""}},[a("CreateWorkSpace",{on:{response:e.showResponse}})],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var te=a("VU/8")(Z,ee,!1,function(e){a("Ffsy")},"data-v-e472ffac",null).exports,ae=a("Gu7T"),re=a.n(ae),ne=a("KMaP"),se=a("dDoS"),ie=a.n(se),oe={props:["cname","wsname","currentUser","obj","type","currentUserId"],name:"ChatRoom",data:function(){return{drawer:!0,message:"",displayEmoji:!1,progress:!1,messageSet:[]}},components:{Picker:ne.Picker},beforeMount:function(){"channel"===this.type?(this.$emit("updatePendingChannel",this.cname),this.progress=!0,this.$socket.emit("fetchChannelMessage",{channel:this.cname,workspace:this.wsname})):"member"===this.type&&(this.$emit("updatePendingMember",this.cname),this.progress=!0,this.$socket.emit("fetchMemberMessage",{myId:this.currentUserId,otherId:this.obj.id,workspace:this.wsname,user:this.currentUser}))},sockets:{newMessage:function(e){var t=this;if(e.channel===this.cname){var a=this.format(e.text);e.text=a,a=this.anotherFormat(e.text),e.text=a,this.messageSet.push(e),setTimeout(function(){t.autoScroll()},300)}else this.$emit("pendingChannel",e.channel)},newMemberMessage:function(e){var t=this;if(e.toId===this.currentUserId&&e.fromId===this.obj.id||e.fromId===this.currentUserId&&e.toId===this.obj.id){var a=this.format(e.text);e.text=a,a=this.anotherFormat(e.text),e.text=a,this.messageSet.push(e),setTimeout(function(){t.autoScroll()},300)}else this.$emit("pendingMember",e.fromId)},channelMessages:function(e){var t=this;e.channel===this.cname&&(e.messageSet.forEach(function(e){var a=t.format(e.text);e.text=a,a=t.anotherFormat(e.text),e.text=a,e.from===t.currentUser&&(e.from="You")}),this.messageSet=[].concat(re()(e.messageSet),re()(this.messageSet)),setTimeout(function(){t.autoScroll()},300)),this.progress=!1},memberMessages:function(e){var t=this;e.user===this.currentUser&&(e.messageSet.forEach(function(e){var a=t.format(e.text);e.text=a,a=t.anotherFormat(e.text),e.text=a,e.from===t.currentUser&&(e.from="You")}),this.messageSet=[].concat(re()(e.messageSet),re()(this.messageSet)),setTimeout(function(){t.autoScroll()},300)),this.progress=!1}},methods:{format:function(e){if(e){var t=e.match(/```/gi),a=0;t&&(a=t.length),a%2!=0&&(a-=1);for(var r=0;r<a;r++)e=r%2==0?e.replace(/```/,'<pre style="font-family:Lucida Sans Typewriter; color: black; background-color: whitesmoke; padding:1vh; font-size:12px; border: 1px solid black; border-radius: 1vh">'):e.replace(/```/,"</pre> \n \n")}return e},anotherFormat:function(e){if(e){var t=e.match(/`/gi),a=0;t&&(a=t.length),a%2!=0&&(a-=1);for(var r=0;r<a;r++)e=r%2==0?e.replace(/`/,'<span style="color: red; background-color: whitesmoke; padding:0.5vh; font-size:12px">'):e.replace(/`/,"</span>")}return e},insertSymbol:function(e){""===this.message?this.message+=e.native:this.message+=" "+e.native},hide:function(){this.displayEmoji=!1},autoScroll:function(){var e=document.getElementById("chatRoom"),t=e.lastChild,a=e.clientHeight,r=e.scrollTop,n=e.scrollHeight,s=void 0;t&&(s=t.clientHeight,t.previousSibling&&a+r+s+t.previousSibling.clientHeight>=n&&window.scrollTo(0,n))},sendMessage:function(){this.message&&("channel"===this.type?this.$socket.emit("sendChannelMessage",{workspace:this.wsname,channel:this.cname,text:this.message,from:this.currentUser}):"member"===this.type&&this.$socket.emit("sendMemberMessage",{workspace:this.wsname,fromId:this.currentUserId,text:this.message,from:this.currentUser,toId:this.obj.id}),this.message="")}},directives:{ClickOutside:ie.a}},ce={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.progress?a("div",[a("v-progress-circular",{staticStyle:{position:"absolute",top:"50%",left:"50%"},attrs:{size:50,indeterminate:"",color:"teal darken-2"}})],1):a("v-container",[a("v-layout",[a("v-flex",{staticStyle:{"margin-bottom":"10vh"}},[a("ol",{attrs:{id:"chatRoom"}},e._l(e.messageSet,function(t){return a("li",{key:t.key,attrs:{message:t}},[a("b",[e._v(e._s(t.from)+": ")]),e._v(" "),a("span",{domProps:{innerHTML:e._s(t.text)}}),e._v(" "),a("p",{staticStyle:{color:"lightgrey"}},[e._v(e._s(t.createdAt))])])}))])],1)],1),e._v(" "),a("v-layout",[a("v-flex",{attrs:{xs10:"","offset-xs1":""}},[a("v-form",{staticStyle:{position:"absolute",bottom:"0",left:"5%",width:"90%"},attrs:{method:"post"},on:{submit:function(t){return t.preventDefault(),e.sendMessage(t)}}},[a("v-textarea",{attrs:{"full-width":"",outline:"",color:"teal darken-2",placeholder:"Message at "+e.cname,type:"text","append-icon":"send","append-outer-icon":"mood",flat:"",height:"20px","no-resize":""},on:{"click:append":e.sendMessage,"click:append-outer":function(){return e.displayEmoji=!e.displayEmoji}},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}})],1),e._v(" "),e.displayEmoji?a("picker",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.hide,expression:"hide"}],staticClass:"hidden-sm-and-down",staticStyle:{position:"absolute",right:"5%",bottom:"15%"},attrs:{title:"Pick your emoji…",emoji:"point_up",id:"picker",native:!0,sheetSize:20,showPreview:!1},on:{select:e.insertSymbol}}):e._e()],1)],1)],1)},staticRenderFns:[]};var ue=a("VU/8")(oe,ce,!1,function(e){a("R5AL")},"data-v-1dd1ff63",null).exports,le={props:["channel"],name:"WorkSpace",data:function(){return{dialog:!1,drawer:!0,workspace:null,progress:!1,currentUser:null,currentUserName:null,currentUserId:null,email:null,members:[],channels:[],snackbar:!1,text:null}},components:{ChatRoom:ue},beforeMount:function(){var e=this;return p()(l.a.mark(function t(){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.progress=!0,t.next=3,e.userList();case 3:e.progress=!1,e.$socket.emit("join",{channels:e.channels,userId:e.$store.state.user._id,workspace:e.workspace});case 5:case"end":return t.stop()}},t,e)}))()},methods:{userList:function(){var e=this;return p()(l.a.mark(function t(){var a;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.$store.state.workspace,e.currentUserName=e.$store.state.user.name,e.currentUserId=e.$store.state.user._id,a){t.next=7;break}e.$router.push("/home"),t.next=13;break;case 7:return t.next=9,B(a);case 9:e.workspace=t.sent,e.members=e.workspace.members,e.channels=e.workspace.channels,e.members.forEach(function(t){t.name===e.currentUserName&&(e.currentUser=t.displayName)});case 13:case"end":return t.stop()}},t,e)}))()},handlePendingChannel:function(e){this.channels.forEach(function(t){t.name===e&&(t.pending=!0)})},handleUpdatePendingChannel:function(e){this.channels.forEach(function(t){t.name===e&&(t.pending=!1)})},handlePendingMember:function(e){this.members.forEach(function(t){t.id===e&&(t.pending=!0)})},handleUpdatePendingMember:function(e){this.members.forEach(function(t){t.displayName===e&&(t.pending=!1)})},signout:function(){this.$socket.emit("signout",{workspace:this.workspace,userId:this.$store.state.user._id}),this.$store.commit("RESET_WORKSPACE"),this.$router.push("/home")},invite:function(){var e=this;return p()(l.a.mark(function t(){var a;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.email){t.next=6;break}return t.next=3,Y({email:e.email,from:e.currentUser,workspaceId:e.$store.state.workspace,workspaceName:e.workspace.name});case 3:"not found"===(a=t.sent)?(e.snackbar=!0,e.text="This Email is not registerd with us"):"sent"===a?(e.snackbar=!0,e.text="Invitation already sent"):a?(e.snackbar=!0,e.text="Invitaion Sent",e.$socket.emit("newInvitation",e.email)):(e.snackbar=!0,e.text="Some error occured"),e.dialog=!1;case 6:case"end":return t.stop()}},t,e)}))()}},sockets:{updateActiveList:function(e){this.members=e.members},updateList:function(){var e=this;return p()(l.a.mark(function t(){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.userList();case 2:case"end":return t.stop()}},t,e)}))()}},computed:{binding:function(){var e={column:!0};return this.$vuetify.breakpoint.mdAndUp&&(e.column=!1),e}}},de={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",{attrs:{id:"inspire"}},[e.progress?a("div",[a("v-progress-circular",{staticStyle:{position:"absolute",top:"50%",left:"50%"},attrs:{size:50,indeterminate:"",color:"teal darken-2"}})],1):e._e(),e._v(" "),a("v-snackbar",{attrs:{top:!0,timeout:1e3},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v("\n    "+e._s(e.text)+"\n  ")]),e._v(" "),a("v-navigation-drawer",{attrs:{fixed:"",app:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[a("v-toolbar",{attrs:{flat:""}},[a("v-list",[a("v-list-tile",[e.workspace?a("v-list-tile-title",{staticClass:"title"},[e._v("\n            "+e._s(e.workspace.name)+"\n          ")]):a("v-list-tile-title",{staticClass:"title"},[e._v("\n            Application\n          ")])],1)],1)],1),e._v(" "),a("v-subheader",[e._v(e._s(e.currentUserName))]),e._v(" "),a("v-divider"),e._v(" "),a("v-subheader",[e._v("Channels")]),e._v(" "),a("v-list",{attrs:{dense:""}},e._l(e.channels,function(t,r){return a("v-list-tile",{key:r,attrs:{to:"/workspace/"+t.name}},[a("v-list-tile-content",[t.pending?a("v-list-tile-title",{staticClass:"font-weight-bold subheading"},[e._v("# "+e._s(t.name))]):a("v-list-tile-title",[e._v("# "+e._s(t.name))])],1)],1)})),e._v(" "),a("v-divider"),e._v(" "),a("v-subheader",[e._v("Direct Messages")]),e._v(" "),a("v-list",{attrs:{dense:""}},e._l(e.members,function(t){return a("v-list-tile",{key:t.name,attrs:{to:"/workspace/"+t.displayName}},[t.pending?a("v-list-tile-content",{staticClass:"font-weight-bold subheading"},[t.id===e.currentUserId?a("v-list-tile-title",[e._v(e._s(t.displayName)+" (You)")]):a("v-list-tile-title",[e._v(e._s(t.displayName))])],1):a("v-list-tile-content",[t.id===e.currentUserId?a("v-list-tile-title",[e._v(e._s(t.displayName)+" (You)")]):a("v-list-tile-title",[e._v(e._s(t.displayName))])],1),e._v(" "),a("v-list-tile-action",[a("v-icon",{attrs:{small:"",color:t.active?"teal":"grey"}},[e._v("fiber_manual_record")])],1)],1)})),e._v(" "),a("v-divider"),e._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-btn",{staticStyle:{"margin-left":"50%"},attrs:{slot:"activator",flat:""},slot:"activator"},[e._v("Invite People")]),e._v(" "),a("v-card",[a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",md8:"","offset-md2":""}},[a("v-text-field",{attrs:{label:"Email Address",type:"email",required:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1)],1)],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"teal darken-2",flat:""},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Close")]),e._v(" "),a("v-btn",{attrs:{color:"teal darken-2",flat:""},on:{click:e.invite}},[e._v("Invite")])],1)],1)],1)],1),e._v(" "),a("v-toolbar",{attrs:{color:"teal darken-2",dark:"",fixed:"",app:""}},[a("v-toolbar-side-icon",{staticClass:"white--text hidden-lg-and-up",on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}}),e._v(" "),a("v-toolbar-title",[e._v(e._s(e.channel))]),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{attrs:{flat:""},on:{click:e.signout}},[e._v("Sign Out")])],1),e._v(" "),a("v-content",[a("v-container",{attrs:{fluid:"","fill-height":""}},[a("v-layout",[a("v-flex",{attrs:{"text-xs-left":""}},[e._l(e.channels,function(t){return e.channel===t.name?a("ChatRoom",{key:t.name,attrs:{obj:t,type:"channel",cname:t.name,wsname:e.workspace.name,currentUser:e.currentUser,currentUserId:e.currentUserId},on:{pendingMember:e.handlePendingMember,updatePendingMember:e.handleUpdatePendingMember,pendingChannel:e.handlePendingChannel,updatePendingChannel:e.handleUpdatePendingChannel}}):e._e()}),e._v(" "),e._l(e.members,function(t){return e.channel===t.displayName?a("ChatRoom",{key:t.name,attrs:{obj:t,type:"member",cname:t.displayName,wsname:e.workspace.name,currentUser:e.currentUser,currentUserId:e.currentUserId},on:{pendingMember:e.handlePendingMember,updatePendingMember:e.handleUpdatePendingMember,pendingChannel:e.handlePendingChannel,updatePendingChannel:e.handleUpdatePendingChannel}}):e._e()})],2)],1)],1)],1)],1)},staticRenderFns:[]};var pe=a("VU/8")(le,de,!1,function(e){a("S6Rp")},"data-v-34c639a2",null).exports;r.default.use(c.a);var ve=new c.a({mode:"history",routes:[{path:"/",name:"Index",component:V,beforeEnter:T},{path:"/callback/:token",beforeEnter:I},{path:"/home",component:te,beforeEnter:$},{path:"/workspace/:channel?",component:pe,beforeEnter:P,props:function(e){return{channel:e.params.channel}},children:[{path:"/",component:ue,props:function(e){return{channel:e.params.channel}}}]}]}),me=a("9JMe"),fe=a("DmT9"),he=a.n(fe),ke=a("hMcO"),be=a.n(ke);a.e(0).then(a.bind(null,"7zck")),r.default.use(s.a),Object(me.sync)(R,ve);var xe=he()("http://localhost:3000");r.default.use(be.a,xe,R),r.default.config.productionTip=!1,new r.default({el:"#app",router:ve,store:R,socket:xe,components:{App:o},template:"<App/>"})},R5AL:function(e,t){},S6Rp:function(e,t){},VBIP:function(e,t){},eXGo:function(e,t){},xSlx:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.5ec4cd2650f5f0741ef5.js.map